/* ====== BASE ====== */
* { box-sizing: border-box; }

:root{
  --bg: #000000;          /* nero profondo per il body */
  --main-bg: #0d0d0d;     /* nero leggermente più chiaro per il contenuto */
  --panel: #111111;
  --panel-2:#121212;
  --stroke:#1f1f1f;
  --text:#e9e9e9;
  --muted:#a9a9a9;
  --accent:#00ff99;
  --accent-2:#00d184;
}

html, body {
  height: 100%;
  margin: 0;
  background-color: var(--bg);   /* tutto nero */
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  display: flex;
  overflow: hidden;
}

/* ====== MAIN ====== */
.main {
  flex: 1;
  display: grid;
  grid-template-rows: auto 1fr auto;
  height: 100%;
  min-width: 0;
  padding: 26px;
  gap: 12px;
  background-color: var(--main-bg);  /* sfondo scuro per l’area centrale */
}


/* ====== SIDEBAR ====== */
.sb{
  width: 280px;
  background: var(--panel-2);
  border-right: 1px solid var(--stroke);
  height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 14px;
  gap: 10px;
}
.sb-header{ display:flex; align-items:center; gap:10px; }
.logo{ width:70px; height:70px; object-fit:contain; border-radius:50%; }
.brand{ font-weight:700; letter-spacing:.3px; }

.sb-nav{ overflow-y:auto; padding-right:6px; margin-top:6px; }
.sb-btn{
  width:100%; background:#181818; border:1px solid var(--stroke); color:var(--text);
  text-align:left; padding:12px 14px; border-radius:10px; margin-bottom:8px;
  cursor:pointer; transition:.18s ease; display:flex; align-items:center; gap:12px;
}
.sb-btn:hover{ border-color:#2a2a2a; color:var(--accent); }
.sb-btn .btn-icon{ font-size:24px; line-height:1; }
.sb-btn .btn-text{ font-weight:600; font-size:15px; }

.sb-footer{ border-top:1px solid var(--stroke); padding-top:10px; color:var(--muted); text-align:center; font-size:12px; }

/* ====== MAIN ====== */
.main{
  flex:1; display:grid; grid-template-rows:1fr auto; height:100%;
  min-width:0; padding:26px; gap:12px;
}
/* Overlay mobile */
.overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.5); opacity:0; pointer-events:none;
  transition:.2s; z-index:9;
}

/* Chat */
.chat-log{
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: 14px;
  padding: 14px;
  overflow-y: auto;
}

.msg{ display:flex; gap:12px; margin-bottom:12px; align-items:flex-start; }
.bubble{
  max-width: 900px; background:#171717; border:1px solid var(--stroke);
  color:var(--text); border-radius:12px; padding:10px 12px; white-space:pre-wrap;
}
.msg.user{ justify-content:flex-end; }
.msg.user .bubble{ background:var(--accent); color:#042417; border-color:var(--accent-2); font-weight:600; }
.role{ font-size:12px; color:var(--muted); min-width:72px; padding-top:3px; }
.msg.user .role{ display:none; }

.typing .bubble{ display:inline-flex; gap:6px; }
.dot{ width:6px; height:6px; border-radius:50%; background:#bdbdbd; opacity:.4; animation:blink 1.2s infinite ease-in-out; }
.dot:nth-child(2){ animation-delay:.2s; } .dot:nth-child(3){ animation-delay:.4s; }
@keyframes blink{ 0%,80%,100%{opacity:.2; transform:translateY(0);} 40%{opacity:1; transform:translateY(-2px);} }

/* Composer */
.composer{
  display:flex; gap:10px; align-items:center; background:var(--panel);
  border:1px solid var(--stroke); border-radius:14px; padding:10px;
}
.composer textarea{
  flex:1; background:transparent; border:none; color:var(--text);
  resize:none; outline:none; font-size:16px; line-height:1.35; max-height:180px;
}
.send{ background:var(--accent); color:#042417; border:none; border-radius:10px; padding:10px 16px; font-weight:800; cursor:pointer; transition:.2s; }
.send:hover{ background:var(--accent-2); }

/* === Quote form box (inline nella chat) === */
.quote-form{
  background:#141414; border:1px dashed #2a2a2a; border-radius:12px; padding:12px; margin-top:6px;
}
.quote-form .row{ display:flex; gap:10px; margin-bottom:8px; }
.quote-form input, .quote-form select{
  background:#0f0f0f; color:#e9e9e9; border:1px solid #2a2a2a; border-radius:8px; padding:8px; flex:1;
}
.quote-form button{
  background:var(--accent); color:#042417; border:none; border-radius:8px; padding:8px 14px; font-weight:700; cursor:pointer;
}

/* === Zone selection buttons === */
.zone-select-btn{
  width:100%; background:#181818; border:1px solid var(--stroke); color:var(--text);
  text-align:left; padding:14px 16px; border-radius:10px; margin-bottom:10px;
  cursor:pointer; transition:.2s ease; display:flex; align-items:center; gap:14px;
}
.zone-select-btn:hover{ border-color:var(--accent); background:#1f1f1f; }
.zone-select-btn .zone-icon{ font-size:28px; line-height:1; }
.zone-select-btn .zone-info{ display:flex; flex-direction:column; gap:4px; }
.zone-select-btn .zone-info strong{ font-size:16px; color:var(--text); }
.zone-select-btn .zone-info small{ font-size:12px; color:var(--muted); }

/* ====== Responsive ====== */
@media (max-width: 880px){
  .sb{
    position:fixed; left:-300px; top:0; bottom:0; z-index:10; transition:.25s ease;
  }
  body.sidebar-open .sb{ left:0; }
  body.sidebar-open .overlay{ opacity:1; pointer-events:auto; }
}
/* === HOTFIX DARK BACKGROUND === */
html, body {
  background: #000 !important;   /* nero pieno */
  color: #fff !important;
}

.main {
  background: #000 !important;   /* anche l'area centrale nera */
}

/* Pannelli leggermente più chiari per contrasto */
.chat-log,
.composer {
  background: #0f0f0f !important;
  border-color: #1f1f1f !important;
}

.sb { /* sidebar */
  background: #121212 !important;
  border-right: 1px solid #1f1f1f !important;
}
/* === DARK MODE FORZATA === */
html, body {
  background-color: #000 !important;
  color: #fff !important;
  margin: 0;
  height: 100%;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
}

.main {
  background-color: #000 !important;
}

.chat-log, .composer {
  background-color: #0f0f0f !important;
  border: 1px solid #1f1f1f !important;
}

.sb {
  background-color: #121212 !important;
  border-right: 1px solid #1f1f1f !important;
}
/* === Pulsante Reset === */
.reset-container {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}
.reset-btn {
  background: #ff4040;
  color: #fff;
  font-weight: 700;
  border: none;
  border-radius: 10px;
  padding: 10px 20px;
  cursor: pointer;
  transition: 0.2s;
}
.reset-btn:hover {
  background: #ff0000;
}
/* === Blocco/Reset UX === */
.lock-banner{
  position: sticky;
  bottom: 12px;
  margin: 10px auto 0;
  background:#1a1a1a;
  border:1px solid #2a2a2a;
  border-radius:10px;
  padding:10px 12px;
  display:flex;
  align-items:center;
  gap:12px;
  max-width: 820px;
}
.lock-banner .note{ color:#ffc9c9; }
.lock-banner .reset-btn{
  margin-left:auto;
  background:#ff4040;
  color:#fff;
  font-weight:700;
  border:none;
  border-radius:10px;
  padding:8px 14px;
  cursor:pointer;
}
.lock-banner .reset-btn:hover{ background:#ff0000; }

.sb-btn:disabled,
.send:disabled{
  opacity:.45;
  cursor:not-allowed;
}
.composer textarea:disabled{
  opacity:.6;
  cursor:not-allowed;
}
